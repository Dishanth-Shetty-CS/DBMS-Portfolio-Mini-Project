CREATE DATABASE FINANCIAL_DB;
USE FINANCIAL_DB;

CREATE TABLE USER (
    UID INT AUTO_INCREMENT PRIMARY KEY, 
    USERNAME VARCHAR(100) NOT NULL,
    PHONE VARCHAR(15) NOT NULL
);

CREATE TABLE ADMIN (
    ADMINID INT AUTO_INCREMENT PRIMARY KEY,
    ADMINNAME VARCHAR(100) NOT NULL
);

CREATE TABLE COMPANY (
    CID INT AUTO_INCREMENT PRIMARY KEY,
    CNAME VARCHAR(100) NOT NULL,
    CAPITAL DECIMAL(15,2) NOT NULL,
    SECTOR VARCHAR(100) NOT NULL
);

CREATE TABLE REPORT (
    REPORT_ID INT AUTO_INCREMENT PRIMARY KEY,
    LTP DECIMAL(10,2) NOT NULL,
    EPS DECIMAL(10,2) NOT NULL,
    ROE DECIMAL(10,2) NOT NULL,
    CID INT NOT NULL,
    FOREIGN KEY (CID) REFERENCES COMPANY(CID) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE TECHNICAL_SIGNALS (
    STOCK_ID INT AUTO_INCREMENT PRIMARY KEY,
    ADX DECIMAL(10,2) NOT NULL,
    VOLUME INT NOT NULL,
    MACD DECIMAL(10,2) NOT NULL,
    CID INT NOT NULL,
    FOREIGN KEY (CID) REFERENCES COMPANY(CID) ON DELETE CASCADE ON UPDATE CASCADE
);

CREATE TABLE TRANSACTION (
    TID INT AUTO_INCREMENT PRIMARY KEY,
    UID INT NOT NULL,
    CID INT NOT NULL,
    RATE DECIMAL(10,2) NOT NULL,
    QUANTITY INT NOT NULL,
    BUY_SELL VARCHAR(10) NOT NULL CHECK (BUY_SELL IN ('BUY', 'SELL')),
    FOREIGN KEY (UID) REFERENCES USER(UID) ON DELETE CASCADE ON UPDATE CASCADE,
    FOREIGN KEY (CID) REFERENCES COMPANY(CID) ON DELETE CASCADE ON UPDATE CASCADE
);

INSERT INTO USER (USERNAME, PHONE) VALUES
('Ravi Kumar', '9876543210'),
('Sneha Reddy', '9123456789'),
('Amit Singh', '9012345678'),
('Divya Sharma', '9988776655'),
('Manoj Shetty', '9090909090');

INSERT INTO ADMIN (ADMINNAME) VALUES
('Manikanta');

INSERT INTO COMPANY (CNAME, CAPITAL, SECTOR) VALUES
('Infosys Ltd', 50000000, 'IT'),
('Reliance Industries', 120000000, 'Energy'),
('Tata Motors', 80000000, 'Automobile'),
('HDFC Bank', 95000000, 'Banking'),
('Wipro Ltd', 60000000, 'IT');

INSERT INTO REPORT (LTP, EPS, ROE, CID) VALUES
(1500, 80, 20, 1),
(2500, 100, 25, 2),
(700, 50, 15, 3),
(1600, 60, 18, 4),
(1300, 55, 22, 5);

INSERT INTO TECHNICAL_SIGNALS (ADX, VOLUME, MACD, CID) VALUES
(25, 10000, 30, 1),
(20, 15000, 28, 2),
(22, 12000, 26, 3),
(27, 18000, 32, 4),
(23, 14000, 29, 5);

INSERT INTO TRANSACTION (UID, CID, RATE, QUANTITY, BUY_SELL) VALUES
(1, 1, 1500, 10, 'BUY'),
(2, 2, 2500, 5, 'SELL'),
(3, 3, 700, 15, 'BUY'),
(4, 4, 1600, 8, 'SELL'),
(5, 5, 1300, 12, 'BUY');